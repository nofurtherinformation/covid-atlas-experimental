(this.webpackJsonpmap=this.webpackJsonpmap||[]).push([[0],{227:function(e,t){},367:function(e,t){},547:function(e,t,n){},548:function(e,t,n){"use strict";n.r(t);var r=n(14),a=n(1),o=n(40),c=n.n(o),i=n(65),s=n.n(i),l=n(155),u=n(96),d=n(80),p=function(e,t){return{type:"SET_STORED_DATA",payload:{data:e,name:t}}},b=function(e){return{type:"SET_CURRENT_DATA",payload:{data:e}}},h=function(e,t){return{type:"SET_COLUMN_NAMES",payload:{data:e,name:t}}},j=function(e){return{type:"SET_CURR_DATE",payload:{date:e}}},f=function(e,t){return{type:"SET_BINS",payload:{bins:e,breaks:t}}},y=function(e){return{type:"SET_VARIABLE_PARAMS",payload:{params:e}}},g=n(36),m=n(292),O=n(293);window.Module;function x(e){return Number(e)===e&&e%1===0}var v=function(){function e(){Object(m.a)(this,e),this.geojson_maps={}}return Object(O.a)(e,[{key:"ReadGeojsonMap",value:function(e,t){var n=new Uint8Array(t.result),r=window.Module._malloc(n.length);window.Module.HEAPU8.set(n,r),window.Module.ccall("new_geojsonmap1",null,["string","number","number"],[e,r,n.length]),window.Module._free(r);var a=window.Module.get_map_type(e);return this.geojson_maps[e]=a,e}},{key:"Has",value:function(e){return e in this.geojson_maps}},{key:"List",value:function(){return this.geojson_maps}},{key:"GetCentroids",value:function(e){for(var t=window.Module.get_centroids(e),n=t.get_x(),r=t.get_y(),a=[],o=0;o<n.size();++o)a.push([n.get(o),r.get(o)]);return a}},{key:"GetNumObs",value:function(e){return window.Module.get_num_obs(e)}},{key:"GetMapType",value:function(e){return this.geojson_maps[e]}},{key:"GetNumericCol",value:function(e,t){return window.Module.get_numeric_col(e,t)}},{key:"CreateRookWeights",value:function(e,t,n,r){return window.Module.rook_weights(e,t,n,r)}},{key:"CreateQueenWeights",value:function(e,t,n,r){return window.Module.queen_weights(e,t,n,r)}},{key:"GetMinDistThreshold",value:function(e,t,n){return window.Module.min_distance_threshold(e,t,n)}},{key:"CreateKnnWeights",value:function(e,t,n,r,a,o){return window.Module.knn_weights(e,t,n,r,a,o)}},{key:"CreateDistWeights",value:function(e,t,n,r,a,o){return window.Module.dist_weights(e,t,n,r,a,o)}},{key:"CreateKernelWeights",value:function(e,t,n,r,a,o,c){return window.Module.kernel_weights(e,t,n,r,a,o,c)}},{key:"CreateKernelBandwidthWeights",value:function(e,t,n,r,a,o){return window.Module.kernel_bandwidth_weights(e,t,n,r,a,o)}},{key:"local_moran",value:function(e,t,n){return window.Module.local_moran(e,t,n)}},{key:"local_moran1",value:function(e,t,n){return window.Module.local_moran1(e,t,this.toVecDouble(n))}},{key:"local_g",value:function(e,t,n){return window.Module.local_g(e,t,n)}},{key:"local_gstar",value:function(e,t,n){return window.Module.local_gstar(e,t,n)}},{key:"local_geary",value:function(e,t,n){return window.Module.local_geary(e,t,n)}},{key:"local_joincount",value:function(e,t,n){return window.Module.local_joincount(e,t,n)}},{key:"GetNeighbors",value:function(e,t,n){var r=window.Module.get_neighbors(e,t,n);return this.parseVecInt(r)}},{key:"parseVecInt",value:function(e){for(var t=[],n=0;n<e.size();++n)t.push(e.get(n));return t}},{key:"parseVecVecInt",value:function(e){for(var t=[],n=0;n<e.size();++n){for(var r=[],a=e.get(n),o=0;o<a.size();++o)r.push(a.get(o));t.push(r)}return t}},{key:"parseVecDouble",value:function(e){for(var t=[],n=0;n<e.size();++n)t.push(e.get(n));return t}},{key:"toVecString",value:function(e){for(var t=new window.Module.VectorString,n=0;n<e.length;++n)t.push_back(e[n]);return t}},{key:"toVecDouble",value:function(e){for(var t=new window.Module.VectorDouble,n=0;n<e.length;++n)isNaN(e[n])||e[n]==1/0?t.push_back(0):t.push_back(e[n]);return t}},{key:"redcap",value:function(e,t,n,r,a,o,c){var i=this.toVecString(r),s=window.Module.redcap(e,t,n,i,a,o,c);return this.parseVecVecInt(s)}},{key:"maxp",value:function(e,t,n,r,a,o,c,i,s,l){var u=this.toVecString(r),d=window.Module.maxp(e,t,u,a,o,i,s,c,n,l);return this.parseVecVecInt(d)}},{key:"custom_breaks",value:function(e,t,n,r,a){var o;o=null==r?window.Module.custom_breaks1(e,n,t,this.toVecDouble(a)):window.Module.custom_breaks(e,n,r,t);for(var c=this.parseVecDouble(o),i=c,s=[],l=[],u=0;u<c.length;++u){l.push([]);var d=x(c[u])?c[u]:c[u].toFixed(2);s.push(""+d)}l.push([]);var p=c[c.length-1];void 0!=p&&(p=x(p)?p:p.toFixed(2),s.push(">"+p)),c.unshift(Number.NEGATIVE_INFINITY),c.push(Number.POSITIVE_INFINITY);for(var b=0;b<a.length;++b)for(var h=a[b],j=0;j<c.length-1;++j){var f=c[j],y=c[j+1];if(h>=f&&h<y){l[j].push(b);break}}for(var g=0;g<s.length;++g);return{k:n,bins:s,breaks:i,id_array:l}}},{key:"cartogram",value:function(e,t){for(var n=window.Module.cartogram(e,this.toVecDouble(t)),r=n.get_x(),a=n.get_y(),o=n.get_radius(),c=r.get(0),i=r.get(0),s=a.get(0),l=a.get(0),u=0;u<r.size();++u)c>r.get(u)&&(c=r.get(u)),i<r.get(u)&&(i=r.get(u)),s>a.get(u)&&(s=a.get(u)),l<a.get(u)&&(l=a.get(u));for(var d=100/(i-c),p=45/(l-s),b=[],h=0;h<r.size();++h){r.get(h),a.get(h);b.push({properties:{id:h},position:[r.get(h)/1e4,a.get(h)/1e4],radius:o.get(h)})}return b}}]),e}(),_=function(){var e=Object(u.a)(s.a.mark((function e(t,n,r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.arrayBuffer();case 2:a=e.sent,r.ReadGeojsonMap("/geojson/county_usfacts.geojson".split("/").slice(-1)[0],{result:a});case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function w(){return(w=Object(u.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){var r=e.clone();return _(r,t,n),e.json()})).then((function(e){return e}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(e,t){return w.apply(this,arguments)},I=n(613),k=n(596);function D(){return(D=Object(u.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.ok?e.text():Promise.reject(e.status)})).then((function(e){for(var t=I.a(e,k.a),r={},a=t.length;a>0;)r[t[--a][n]]=Object.values(t[a]);return[r,Object.keys(t[0])]}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=function(e,t){return D.apply(this,arguments)},E=n(294),S=function(e,t,n,r,a){var o={},c={},i=Object.keys(e.features[0]).length,s=e.features.length,l=parseInt(e.features[0].properties[t]);if(Number.isInteger(l))for(;s>0;)s--,o[parseInt(e.features[s].properties[t])]=e.features[s],c[parseInt(e.features[s].properties[t])]={};else for(;s>0;)s--,o[e.features[s].properties[t]]=e.features[s],c[e.features[s].properties[t]]={};for(var u=n.length;u>0;){u--;var d=Object.keys(n[u][0]);for(s=d.length;s>0;){s--;try{c[d[s]][r[u]]=n[u][0][d[s]]}catch(f){}}}for(var p=Object(E.merge)(o,c),b=[],h=Object.keys(p),j=0;j<h.length;j++)Object.keys(p[h[j]]).length==r.length+i&&b.push(p[h[j]]);return b},P=function(e,t,n){return e[t].indexOf(n)},C=function(e,t,n,r){try{return e[t][n].indexOf(r)}catch(a){return null}},M=function(e,t,n,r,a,o,c,i,s){return null===o&&null===r?(e[t]||e[n])*s:null===o&&null!==r?(e[n]-e[n-r])/r*s:null!==o&&null===r?(e[t]||e[n])/(a[o]||a[c])*s:null!==o&&null!==r&&null===i?(e[n]-e[n-r])/r/(a[o]||a[c])*s:null!==o&&null!==r&&null!==i?(e[n]-e[n-r])/r/((a[c]-a[c-i])/i)*s:0},N=function(e,t,n,r,a,o,c,i,s,l,u,d){var p=performance.now(),b=[],h=e.length;if(null===a&&null===r)for(var j=e[0][t].length-1,f="time-series"===i?e[0][c].length-1:l;h>0;)h--,b.push(M(e[h][t],r,j,o,e[h][c],s,f,u,d));else for(;h>0;)h--,b.push(M(e[h][t],r,a,o,e[h][c],s,l,u,d));return console.log(performance.now()-p),b},A=function(e,t,n){if(0==e)return n[0];for(var r=1;r<t.length;r++)if(e<t[r])return n[r];return n[0]},V=function(e,t,n,r){for(var a=performance.now(),o=Object.keys(e),c=n,i=[];c<e[o[0]][t].length;){for(var s={},l=0,u=0;u<o.length;)l+=e[o[u]][t][c],u++;s.count=l,s.date=r[c-n],i.push(s),c++}return console.log(performance.now()-a),i},G=n(606),F=n(612),L=n(296),U=n(309),z=n(608),B={latitude:35.850033,longitude:-105.6500523,zoom:3.5,pitch:0,bearing:0},W={CONTINENTS:"".concat(".","/geojson/world50m.json")},X=new F.a({id:"globe",controller:!1,resolution:1}),H=new L.a({repeat:!0}),K=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!1),i=Object(d.a)(c,2),s=i[0],l=(i[1],Object(g.c)((function(e){return e.storedData}))),u=Object(g.c)((function(e){return e.currentData})),p=Object(g.c)((function(e){return e.bins})),b=Object(g.c)((function(e){return e.colorScale})),h=Object(g.c)((function(e){return e.use3D})),j=Object(g.c)((function(e){return e.dataParams})),f=Object(g.b)(),y=[new z.a({id:"base continents",data:W.CONTINENTS,pickable:!1,stroked:!1,filled:!0,wireframe:!1,getFillColor:[30,30,30]}),new z.a({id:"choropleth",data:{type:"FeatureCollection",name:u,crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:l[u]?l[u]:[]},pickable:!0,stroked:!1,filled:!0,wireframe:!1,extruded:h,opacity:h?1:.5,getFillColor:function(e){return function(e,t){return t.hasOwnProperty("bins")?A(M(e[j.numerator],j.nProperty,j.nIndex,j.nRange,e[j.denominator],j.dProperty,j.dIndex,j.dRange,j.scale),t.breaks,b):[0,0,0]}(e,p)},getElevation:function(e){return function(e,t){return t.hasOwnProperty("bins")?1e3*M(e[j.numerator],j.nProperty,j.nIndex,j.nRange,e[j.denominator],j.dProperty,j.dIndex,j.dRange,j.scale):0}(e,p)},updateTriggers:{data:u,getFillColor:[j],getElevation:[j]},onHover:function(e){return o(e)},onClick:function(e){return f({type:"SET_DATA_SIDEBAR",payload:{data:e.object}})},autoHighlight:!0})];return Object(r.jsx)("div",{id:"mapContainer",style:{position:"fixed",left:0,top:0,width:"100%",height:"100%"},children:Object(r.jsxs)(G.a,{initialViewState:B,controller:!0,layers:y,views:s?X:H,children:[Object(r.jsx)(U.a,{reuseMaps:!0,mapStyle:"mapbox://styles/lixun910/ckhkoo8ix29s119ruodgwfxec",preventStyleDiffing:!0,mapboxApiAccessToken:"pk.eyJ1IjoibGl4dW45MTAiLCJhIjoiY2locXMxcWFqMDAwenQ0bTFhaTZmbnRwaiJ9.VRNeNnyb96Eo-CorkJmIqg"}),n.object&&Object(r.jsxs)("div",{style:{position:"absolute",zIndex:1,pointerEvents:"none",left:n.x,top:n.y,background:"white",padding:"0 10px"},children:[Object(r.jsx)("h5",{children:"".concat(n.object.properties.NAME,",").concat(n.object.properties.state_name)}),"Cases: ".concat(n.object.cases.slice(-1)[0]),Object(r.jsx)("br",{}),"Deaths: ".concat(n.object.deaths.slice(-1)[0]),Object(r.jsx)("br",{}),"New Cases: ".concat(n.object.cases.slice(-1)[0]-n.object.cases.slice(-2,-1)[0]),Object(r.jsx)("br",{}),"New Deaths: ".concat(n.object.deaths.slice(-1)[0]-n.object.deaths.slice(-2,-1)[0]),Object(r.jsx)("br",{})]})]})})},J=n(602),Y=n(599),q=n(614),Q=n(551),Z=n(604),$=Object(Y.a)({root:{width:"100%",margin:0,padding:"5px 20px",color:"white"},button:{color:"rgb(200,200,200)",background:"none",transition:"250ms all",borderColor:"white !important",fontSize:"75% !important","& :hover":{color:"white"}},buttonActive:{cursor:"initial",fontSize:"75%",color:"black !important",background:"white !important",transition:"250ms all",borderColor:"white"},slider:{color:"white",height:"100%","& > span.MuiSlider-rail":{display:"none"},"& > span.MuiSlider-track":{display:"none"},"& > span.MuiSlider-thumb":{width:"1px",height:"100%"},"& > span.MuiSlider-thumb.MuiSlider-active":{boxShadow:"0px 0px 10px rgba(200,200,200,0.5)"}}}),ee=function(){var e=$(),t=Object(g.b)(),n=Object(g.c)((function(e){return e.currentData})),o=Object(g.c)((function(e){return e.dates})),c=Object(g.c)((function(e){return e.dataParams})),i=Object(g.c)((function(e){return e.startDateIndex})),s=Object(a.useState)(null),l=Object(d.a)(s,2),u=l[0],p=l[1],b=Object(a.useState)(!1),h=Object(d.a)(b,2),f=h[0],m=h[1],O=function(e){"custom"===e?(m(!0),"time-series"===c.nType&&"time-series"===c.dType?t(y({nRange:14,dRange:14})):"time-series"===c.nType?t(y({nRange:14})):"time-series"===c.dType&&t(y({dRange:14}))):(m(!1),"time-series"===c.nType&&"time-series"===c.dType?t(y({nRange:e,dRange:e})):"time-series"===c.nType?t(y({nRange:e})):"time-series"===c.dType&&t(y({dRange:e})))};return void 0!==o[n]?Object(r.jsxs)(J.a,{container:!0,spacing:2,className:e.root,id:"slider-container",style:{visibility:"time-series"===c.nType?"visible":"hidden"},children:[Object(r.jsx)(J.a,{item:!0,xs:12,children:Object(r.jsx)("h4",{style:{textAlign:"center",color:"white"},children:o[n][c.nIndex]||o[n].slice(-1)[0]})}),Object(r.jsx)(J.a,{item:!0,xs:1,children:Object(r.jsx)("button",{id:"playPause",onClick:function(){return function(e,n,r){null===e?p(setInterval((function(e){return t({type:"INCREMENT_DATE",payload:{index:n}})}),r)):(clearInterval(e),p(null))}(u,1,100)},children:null===u?"play":"pause"})}),Object(r.jsx)(J.a,{item:!0,xs:9,children:Object(r.jsx)(q.a,{value:c.nIndex,onChange:function(e,r){"time-series"===c.nType&&"time-series"===c.dType?t(y({nIndex:r,dIndex:r})):"time-series"===c.nType?t(y({nIndex:r})):"time-series"===c.dType&&t(y({dIndex:r})),t(j(o[n][r]))},"aria-labelledby":"continuous-slider",className:e.slider,min:i,step:1,max:o[n].length-1})}),Object(r.jsx)(J.a,{item:!0,xs:2,children:Object(r.jsxs)(Z.a,{orientation:"vertical",color:"primary","aria-label":"vertical outlined primary button group",style:{float:"right"},children:[Object(r.jsx)(Q.a,{className:null===c.nRange?e.buttonActive:e.button,onClick:function(){return O(null)},children:"Total"}),Object(r.jsx)(Q.a,{className:1===c.nRange?e.buttonActive:e.button,onClick:function(){return O(1)},children:"New Daily"}),Object(r.jsx)(Q.a,{className:7===c.nRange?e.buttonActive:e.button,onClick:function(){return O(7)},children:"Weekly Average"}),Object(r.jsx)(Q.a,{className:f?e.buttonActive:e.button,onClick:function(){return O("custom")},children:"Custom Range"})]})})]}):Object(r.jsx)("div",{className:e.root})},te=function(e){return Object(r.jsx)("div",{id:"legend",children:Object(r.jsxs)(J.a,{container:!0,spacing:2,id:"legend-bins-container",children:[Object(r.jsx)(J.a,{item:!0,xs:4,children:Object(r.jsx)("h4",{children:void 0!==e.title&&e.title})}),Object(r.jsxs)(J.a,{item:!0,xs:8,children:[Object(r.jsx)("div",{id:"binBars",children:void 0!==e.colors&&e.colors.map((function(e){return Object(r.jsx)("div",{className:"bin color",style:{backgroundColor:"rgb(".concat(e[0],",").concat(e[1],",").concat(e[2],")")}},"".concat(e[0]).concat(e[1]))}))}),Object(r.jsxs)("div",{id:"binLabels",style:{padding:"0 ".concat(void 0!==e.labels?100/e.labels.length/2-1:0,"%")},children:[Object(r.jsx)("div",{className:"bin label",children:"0"}),void 0!==e.labels&&function(e){if(void 0!==e)return e.slice(-1)[0]!==">".concat(e.slice(-2,-1)[0])||(e.splice(0,1,"<".concat(e[0])),e.splice(-2,1)),e}(e.labels).map((function(e){return Object(r.jsx)("div",{className:"bin label",children:e},e)}))]})]})]})})},ne=n(23),re=n(615),ae=n(616),oe=n(605),ce=n(607),ie=Object(Y.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120}}})),se=function(e){var t=ie(),n=Object(g.b)(),o=Object(g.c)((function(e){return e.cols})),c=Object(g.c)((function(e){return e.currentData})),i=Object(a.useState)(!1),s=Object(d.a)(i,2),l=s[0],u=s[1],p={"Confirmed Count":{numerator:"cases",nType:"time-series",nProperty:null,nRange:null,denominator:"properties",dType:"none",dProperty:null,dRange:null,dIndex:null,scale:1},"Confirmed Count per 100K Population":{numerator:"cases",nType:"time-series",nProperty:null,denominator:"properties",dType:"characteristic",dProperty:"population",dRange:null,dIndex:null,scale:1e5},"Confirmed Count per Licensed Bed":{numerator:"cases",nType:"time-series",nProperty:null,denominator:"properties",dType:"characteristic",dProperty:"beds",dRange:null,dIndex:null,scale:1},"Death Count":{numerator:"deaths",nType:"time-series",nProperty:null,denominator:"properties",dType:"none",dProperty:null,dRange:null,dIndex:null,scale:1},"Death Count per 100K Population":{numerator:"deaths",nType:"time-series",nProperty:null,denominator:"properties",dType:"characteristic",dProperty:"population",dRange:null,dIndex:null,scale:1e5},"Death Count / Confirmed Count":{numerator:"deaths",nType:"time-series",nProperty:null,denominator:"cases",dType:"time-series",dProperty:null,dIndex:null,scale:1},"Uninsured % (Community Health Factor)":{numerator:"chr_health_factors",nType:"characteristic",nProperty:C(o,c,"chr_health_factors","UnInPrc"),nRange:null,denominator:"properties",dType:"none",dProperty:null,dRange:null,dIndex:null,scale:1},"Over 65 Years % (Community Health Context)":{numerator:"chr_health_context",nType:"characteristic",nProperty:C(o,c,"chr_health_context","Over65YearsPrc"),nRange:null,denominator:"properties",dType:"none",dProperty:null,dRange:null,dIndex:null,scale:1},"Life expectancy (Length and Quality of Life)":{numerator:"chr_life",nType:"characteristic",nProperty:C(o,c,"chr_life","LfExpRt"),nRange:null,denominator:"properties",dType:"none",dProperty:null,dRange:null,dIndex:null,scale:1}},b={"Forecasting (5-Day Severity Index)":{numerator:"predictions",nType:"characteristic",nProperty:C(o,c,"predictions","severity_index"),nRange:null,denominator:"properties",dType:"none",dProperty:null,dRange:null,dIndex:null,scale:1}},h={"7 Day Testing Positivity Rate %":{numerator:"testing_wk_pos",nType:"time-series",nProperty:null,nRange:null,denominator:"properties",dType:"none",dProperty:null,dRange:null,dIndex:null,scale:1},"7 Day Testing Capacity":{numerator:"testing_tcap",nType:"time-series",nProperty:null,nRange:null,denominator:"properties",dType:"none",dProperty:null,dRange:null,dIndex:null,scale:1},"7 Day Confirmed Cases per Testing %":{numerator:"testing_ccpt",nType:"time-series",nProperty:null,nRange:null,denominator:"properties",dType:"none",dProperty:null,dRange:null,dIndex:null,scale:1}};return Object(r.jsxs)("div",{id:"variable-panel",style:{transform:l?"translateX(-100%)":""},children:[Object(r.jsxs)(oe.a,{className:t.formControl,children:[Object(r.jsx)(re.a,{htmlFor:"numerator-select",children:"Select Variable"}),Object(r.jsxs)(ce.a,{defaultValue:"",id:"numerator-select",onChange:function(e){var t=e.target.value;console.log(t),p.hasOwnProperty(t)?n(y(Object(ne.a)({},p[e.target.value]))):b.hasOwnProperty(t)?n(y(Object(ne.a)({},b[e.target.value]))):n(y(Object(ne.a)({},h[e.target.value])))},children:[Object.keys(p).map((function(e){return Object(r.jsx)(ae.a,{value:e,children:e},e)})),c.includes("county")&&Object.keys(b).map((function(e){return Object(r.jsx)(ae.a,{value:e,children:e},e)})),c.includes("state")&&Object.keys(h).map((function(e){return Object(r.jsx)(ae.a,{value:e,children:e},e)}))]})]}),Object(r.jsx)("hr",{}),Object(r.jsx)("button",{onClick:function(){return u((function(e){return!e}))},id:"showHideLeftPanel",children:"show/hide"})]})},le=n(116),ue=function(){var e=Object(g.c)((function(e){return e.chartData}));return Object(r.jsx)(J.a,{container:!0,spacing:2,id:"main-chart-container",children:Object(r.jsx)(J.a,{item:!0,xs:10,style:{height:"100%"},children:Object(r.jsx)(le.c,{width:"100%",height:"100%",children:Object(r.jsxs)(le.b,{data:e,margin:{top:0,right:10,left:45,bottom:20},children:[Object(r.jsx)(le.e,{dataKey:"date"}),Object(r.jsx)(le.f,{}),Object(r.jsx)(le.d,{}),Object(r.jsx)(le.a,{type:"monotone",dataKey:"count",stroke:"#82ca9d",dot:!1})]})})})})};var de=function(){var e=Object(g.c)((function(e){return e.storedData})),t=Object(g.c)((function(e){return e.currentData})),n=Object(g.c)((function(e){return e.cols})),o=Object(g.c)((function(e){return e.dates})),c=Object(g.c)((function(e){return e.bins})),i=Object(g.c)((function(e){return e.binMode})),m=Object(g.c)((function(e){return e.colorScale})),O=Object(g.c)((function(e){return e.dataParams})),x=Object(g.c)((function(e){return e.startDateIndex})),_=Object(a.useState)(null),w=Object(d.a)(_,2),I=w[0],k=w[1],D=Object(g.b)(),E=function(e){for(var t=0;t<e.length;t++)if(Date.parse(e[t]))return[e.slice(t),t]},C=function(e,t){for(var n={},r=0;r<e.length;r++)n[t[r]]=e[r][1];return n};function M(){return(M=Object(u.a)(s.a.mark((function e(t,n,r,a,o){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=n.map((function(e){return R("".concat(".","/csv/").concat(e,".csv"),r[1]).then((function(e){return e}))})),Promise.all([T("".concat(".","/geojson/").concat(t),o)].concat(Object(l.a)(c))).then((function(e){D(p(S(e[0],r[0],e.slice(1),a,r[1]),t)),D(b(t)),D(h(C(e.slice(1),a),t))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function e(){setTimeout((function(){console.log(window.Module),void 0===window.Module?e():null===I&&k(new v)}),100)}()}),[window.Module]),Object(a.useEffect)((function(){console.log(I),null!==I&&""===t&&function(e,t,n,r,a){M.apply(this,arguments)}("county_usfacts.geojson",["covid_confirmed_usafacts","covid_deaths_usafacts","berkeley_predictions","chr_health_context","chr_life","chr_health_factors"],["GEOID","FIPS"],["cases","deaths","predictions","chr_health_context","chr_life","chr_health_factors"],I)}),[I]),Object(a.useEffect)((function(){""!=t&&(o.hasOwnProperty(t)||(function(e,t){D({type:"SET_CENTROIDS",payload:{data:t.GetCentroids(e),name:e}})}(t,I),function(e,t,n){var r=E(e[t]);D(function(e,t){return{type:"SET_DATES",payload:{data:e,name:t}}}(r[0],n)),D(j(r[0].slice(-1)[0])),D(y({nIndex:P(e,t,r[0].slice(-1)[0])})),D({type:"SET_START_DATE_INDEX",payload:{index:r[1]}})}(n[t],"cases",t)))}),[n]),Object(a.useEffect)((function(){e[t]&&D({type:"SET_CHART_DATA",payload:{data:V(e[t],"cases",x,o[t])}})}),[x]),Object(a.useEffect)((function(){if(null!==I&&""!==t)if("dynamic"===i){var n=I.custom_breaks(t,"natural_breaks",8,null,N(e[t],O.numerator,O.nProperty,O.nIndex,O.nRange,O.denominator,O.dProperty,O.dIndex,O.dRange,O.scale));D(f(n.bins,[-Math.pow(10,12)].concat(Object(l.a)(n.breaks.slice(1,-1)),[Math.pow(10,12)])))}else{var r=I.custom_breaks(t,"natural_breaks",8,null,N(e[t],O.numerator,O.nType,O.nProperty,null,O.nRange,O.denominator,O.dType,O.dProperty,O.dIndex,O.dRange,O.scale));D(f(r.bins,[-Math.pow(10,12)].concat(Object(l.a)(r.breaks.slice(1,-1)),[Math.pow(10,12)])))}}),[o,e[t],O.numerator,O.nProperty,O.nRange,O.denominator,O.dProperty,O.dRange,O.scale]),Object(a.useEffect)((function(){if(null!==I&&"dynamic"===i&&""!==t){var n=I.custom_breaks(t,"natural_breaks",8,null,N(e[t],O.numerator,O.nProperty,O.nIndex,O.nRange,O.denominator,O.dProperty,O.dIndex,O.dRange,O.scale));D(f(n.bins,[-Math.pow(10,12)].concat(Object(l.a)(n.breaks.slice(1,-1)),[Math.pow(10,12)])))}}),[O.nIndex,O.dIndex]),Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(K,{}),Object(r.jsx)(se,{}),Object(r.jsxs)("div",{id:"bottom-drawer",children:[Object(r.jsx)(te,{labels:c.bins,title:t,colors:m}),Object(r.jsx)("hr",{}),Object(r.jsx)(ue,{}),Object(r.jsx)(ee,{})]})]})},pe=n(172),be=n(183),he=Object(be.a)({geodaProxy:null,storedData:{},cols:{},currentData:"",chartData:{},bins:{},binMode:"",colorScale:[[240,240,240],[255,255,204],[255,237,160],[254,217,118],[254,178,76],[253,141,60],[252,78,42],[227,26,28],[177,0,38]],centroids:{},dates:{},currDate:"",currDateIndex:"",startDateIndex:"",currentVariable:"7-Day Average Daily New Confirmed Count per 100K Pop",currentMethod:"natural_breaks",currentOverlay:"",currentResource:"",dataParams:{numerator:"cases",nType:"time-series",nProperty:null,nRange:7,nIndex:null,denominator:"properties",dType:"characteristic",dProperty:"population",dRange:null,dIndex:null,scale:1e5},storedRange:null,isCartogram:!1,currentGeoid:"",use3D:!1,sidebarData:{}},"chartData",[{}]),je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GEOID":return Object(ne.a)(Object(ne.a)({},e),{},{currentGeoid:t.payload.geoid});case"SET_STORED_DATA":var n=Object(ne.a)({},e.storedData);return n[t.payload.name]=t.payload.data,Object(ne.a)(Object(ne.a)({},e),{},{storedData:n});case"SET_CENTROIDS":var r=Object(ne.a)({},e.centroids);return r[t.payload.name]=t.payload.data,Object(ne.a)(Object(ne.a)({},e),{},{centroids:r});case"SET_CURRENT_DATA":return Object(ne.a)(Object(ne.a)({},e),{},{currentData:t.payload.data});case"SET_GEODA_PROXY":return Object(ne.a)(Object(ne.a)({},e),{},{geodaProxy:t.payload.proxy});case"SET_DATES":var a=Object(ne.a)({},e.dates);return a[t.payload.name]=t.payload.data,Object(ne.a)(Object(ne.a)({},e),{},{dates:a});case"SET_DATA_FUNCTION":return Object(ne.a)(Object(ne.a)({},e),{},{currentDataFn:t.payload.fn});case"SET_COLUMN_NAMES":var o=Object(ne.a)({},e.cols);return o[t.payload.name]=t.payload.data,Object(ne.a)(Object(ne.a)({},e),{},{cols:o});case"SET_CURR_DATE":return Object(ne.a)(Object(ne.a)({},e),{},{currDate:t.payload.date});case"SET_DATE_INDEX":return Object(ne.a)(Object(ne.a)({},e),{},{currDateIndex:t.payload.index});case"SET_START_DATE_INDEX":return Object(ne.a)(Object(ne.a)({},e),{},{startDateIndex:t.payload.index});case"SET_BINS":var c={};return c.bins=t.payload.bins,c.breaks=t.payload.breaks,Object(ne.a)(Object(ne.a)({},e),{},{bins:c});case"SET_3D":return Object(ne.a)(Object(ne.a)({},e),{},{use3D:!e.use3D});case"SET_DATA_SIDEBAR":return Object(ne.a)(Object(ne.a)({},e),{},{sidebarData:t.payload.data});case"INCREMENT_DATE":var i=Object(ne.a)({},e.dataParams);return t.payload.index+e.dataParams.nIndex>e.dates[e.currentData].length?(i.nIndex=e.startDateIndex,i.dIndex=e.startDateIndex,Object(ne.a)(Object(ne.a)({},e),{},{dataParams:i})):(i.nIndex=i.nIndex+t.payload.index,i.dIndex=i.dIndex+t.payload.index,Object(ne.a)(Object(ne.a)({},e),{},{dataParams:i}));case"SET_VARIABLE_PARAMS":var s=Object(ne.a)(Object(ne.a)({},e.dataParams),t.payload.params);return"time-series"===s.nType&&null===s.nIndex&&(s.nIndex=e.storedIndex,s.nRange=e.storedRange),"time-series"===s.dType&&null===s.dIndex&&(s.dIndex=e.storedIndex,s.dRange=e.storedRange),"characteristic"===s.nType&&"time-series"===e.dataParams.nType?Object(ne.a)(Object(ne.a)({},e),{},{storedIndex:e.dataParams.nIndex,storedRange:e.dataParams.nRange,dataParams:s}):Object(ne.a)(Object(ne.a)({},e),{},{dataParams:s});case"SET_CHART_DATA":return Object(ne.a)(Object(ne.a)({},e),{},{chartData:t.payload.data});default:return e}},fe=(n(547),Object(pe.b)(je,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));c.a.render(Object(r.jsx)(g.a,{store:fe,children:Object(r.jsx)(de,{})}),document.getElementById("root"))}},[[548,1,2]]]);
//# sourceMappingURL=main.2781db42.chunk.js.map